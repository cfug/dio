name: quality_checks
description: Runs Dart analysis and unit tests
contact: 'Frontend Architecture / #support-frontend-architecture'

image: drydock-prod.workiva.net/workiva/dart2_base_image:1
size: medium
timeout: 300 # 5 minutes

artifacts:
  - /testing/artifacts

scripts:
  - merge_branch.sh master
  - cd dio
  - timeout 2m dart pub get
  - dart analyze
  - cd ..
  - chmod +x ./scripts/prepare_pinning_certs.sh
  - ./scripts/prepare_pinning_certs.sh
  - cd dio
  - dart test -p vm